<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HBnB - Add Review</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  
  <header>
    <img src="images/logo.png" alt="HBnB Logo" class="logo">
    <nav>
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="login.html" id="login-link">Login</a>
      <span id="user-email" class="user-greeting"></span>
      <button id="logout-btn" class="logout-btn" style="display: none;">Logout</button>
    </nav>
  </header>

  
  <main>
    
    <section style="margin-bottom: 20px; padding: 15px; background-color: #f5f5f5; border-radius: 8px; border-left: 4px solid #7A5A9A;">
      <h2 style="margin: 0; color: #333;">Add Review for: <span id="place-name" style="color: #7A5A9A;">Loading...</span></h2>
    </section>

    
    <form id="standalone-review-form" class="review-form">
      <h2>Add a Review</h2>

      
      <input type="hidden" id="place-id" value="">

      <label for="rating-select">Rating:</label>
      <select id="rating-select" name="rating" required>
        <option value="" disabled selected>Select rating</option>
        <option value="5">⭐⭐⭐⭐⭐ (5 stars)</option>
        <option value="4">⭐⭐⭐⭐ (4 stars)</option>
        <option value="3">⭐⭐⭐ (3 stars)</option>
        <option value="2">⭐⭐ (2 stars)</option>
        <option value="1">⭐ (1 star)</option>
      </select>

      <label for="review-text">Review Text:</label>
      <textarea id="review-text" name="review" rows="6" placeholder="Write your review here..." required></textarea>

      <button type="submit">Submit Review</button>
      <p id="review-message" class="message"></p>
    </form>
  </main>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 HBnB — All rights reserved</p>
  </footer>

  <script src="scripts.js"></script>
  <!-- ✅ إضافة: JavaScript بسيط وآمن لتحميل اسم المكان -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const urlParams = new URLSearchParams(window.location.search);
      const placeId = urlParams.get('id') || urlParams.get('place');
      
      if (placeId) {
        document.getElementById('place-id').value = placeId;
        
        // تحميل اسم المكان من الـ API
        fetch(`${API_URL}/places/${placeId}`)
          .then(response => {
            if (response.ok) {
              return response.json();
            }
            return null;
          })
          .then(place => {
            if (place) {
              document.getElementById('place-name').textContent = place.title || 'Place';
            } else {
              document.getElementById('place-name').textContent = 'Unknown Place';
            }
          })
          .catch(error => {
            console.error('Error loading place:', error);
            document.getElementById('place-name').textContent = 'Place';
          });
      }
    });
  </script>
</body>
</html>
